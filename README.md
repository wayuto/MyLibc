# MyLibc
(This document generated by AI)

MyLibc is a lightweight implementation of the C Standard Library, designed to provide common C library functionalities. This project serves as a learning tool to understand the inner workings of the C Standard Library and as an experimental project.

## Project Structure

```
.
├── asm             # Assembly code for low-level functionalities
│   ├── file.asm    # Assembly functions for file operations
│   └── io.asm      # Assembly functions for basic input/output
├── include         # Header files for the C Standard Library
│   ├── convert.h   # Type conversion functions
│   ├── math.h      # Mathematical functions and constants
│   ├── stdio.h     # Standard input/output functions
│   ├── string.h    # String manipulation functions
│   ├── stdbool.h   # Boolean type support
│   ├── stdarg.h    # Variadic argument support
│   └── stddef.h    # Common macros and typedefs
├── so              # Directory for shared library files
│   ├── libio.so    # Shared library for I/O operations
│   ├── libfile.so  # Shared library for file operations
├── wcc.c           # Custom wrapper for GCC compilation
├── main.c          # Example usage of MyLibc
└── setup.sh        # Setup script for environment variables and tool installation
```

## Features

### Type Conversion Functions (`convert.h`)
This header provides functions for converting between various data types:
- `itoa(int64_t, char*)`: Converts an integer to a string.
- `ftoa(double, char*)`: Converts a floating-point number to a string.
- `atoi(const char*)`: Converts a string to an integer.
- `atof(const char*)`: Converts a string to a floating-point number.

### Mathematical Functions (`math.h`)
The `math.h` file includes common mathematical constants and functions for numerical operations.

#### Constants
- `PI`: Approximate value of π (3.14159...)
- `E`: Approximate value of e (2.71828...)

#### Functions
- `abs(int64_t x)`: Returns the absolute value of a 64-bit integer.
- `fabs(double x)`: Returns the absolute value of a double.
- Logarithmic functions:
  - `ln(double x)`: Computes the natural logarithm of `x`.
  - `log(double b, double a)`: Computes the logarithm of `a` with base `b`.
  - `lg(double x)`: Computes the base-10 logarithm of `x`.
  - `lb(double x)`: Computes the base-2 logarithm of `x`.
- Exponential functions:
  - `exp(double x)`: Computes the exponential of `x`.
  - `pow(double x, double y)`: Computes `x` raised to the power of `y`.
- Rounding functions:
  - `ceil(double x)`: Returns the smallest integer greater than or equal to `x`.
  - `floor(double x)`: Returns the largest integer less than or equal to `x`.
  - `round(double x)`: Rounds `x` to the nearest integer.
- `sqrt(double x)`: Computes the square root of `x`.
- `hypot(double x, double y)`: Computes the hypotenuse for the given `x` and `y`.

### String Manipulation Functions (`string.h`)
Provides functions for working with strings:
- `strlen(const char*)`: Returns the length of a string.
- `strcmp(const char*, const char*)`: Compares two strings for equality.
- `strcpy(char*, const char*)`: Copies one string to another.
- `strcat(char*, const char*)`: Appends one string to another.
- `strchr(const char*, char)`: Finds the first occurrence of a character in a string.
- `strrchr(const char*, char)`: Finds the last occurrence of a character in a string.
- `strstr(const char*, const char*)`: Finds the first occurrence of a substring in a string.

### I/O Functions (`stdio.h`)
Implements basic input/output and file operation functions:
- `printf(char*, ...)`: Prints formatted output (supports `%s`, `%d`, `%f`, `%c`).
- `scanf(const char*, ...)`: Reads formatted input (supports `%s`, `%d`, `%f`).
- File operations:
  - `open(const char*, int, int)`: Opens a file.
  - `read(int, void*, size_t)`: Reads from a file.
  - `write(int, const void*, size_t)`: Writes to a file.
  - `close(int)`: Closes a file.
- `exit(int)`: Exits the program.

### Boolean Support (`stdbool.h`)
Defines the `bool` type for older versions of C (before C23):
- `bool`: Integer type representing boolean values.
- `true` and `false`: Boolean constants.

### Variadic Arguments (`stdarg.h`)
Implements support for variadic arguments using macros such as `va_start`, `va_end`, `va_arg`, and `va_copy`.

### Custom Wrapper Compiler (`wcc`)
The `wcc` tool is a custom wrapper for `gcc`, simplifying the inclusion of the MyLibc headers and shared libraries during compilation.

#### How `wcc` Works
1. It reads the `LD_PATHS` environment variable to automatically include the directory containing the MyLibc header files.
2. It reads the `SO_PATHS` environment variable to link the required shared libraries.
3. Compiles the provided source files using `gcc` with these predefined paths.

### Example

Here's a simple example showcasing the usage of MyLibc:

```c
#include "include/stdio.h"
#include "include/math.h"
#include "include/string.h"
#include "include/convert.h"

int main() {
    char *filename = "hello.txt";
    char buf[1024];
    int fd = open(filename, O_RDONLY, 0);
    ssize_t bytes_read = read(fd, buf, sizeof(buf) - 1);
    buf[bytes_read] = '\0';

    strcat(buf, ".514");
    double result = atof(buf);
    result = round(result);
    printf("Rounded result: %f\n", result);

    close(fd);
    return 0;
}
```

### Output

Assuming `hello.txt` contains the text `114`, the output of the program will be:

```
Rounded result: 115.0
```

## Setup

1. Run the `setup.sh` script to configure the environment:
   ```bash
   ./setup.sh
   ```

   This will:
   - Set the environment variables `LD_PATHS` and `SO_PATHS` in your shell configuration files (`~/.zshrc` and/or `~/.bashrc`).
   - Compile the `wcc` tool.
   - Create a symbolic link for `wcc` in `/usr/bin`.

2. Reload your shell configuration:
   ```bash
   source ~/.zshrc  # For Zsh users
   source ~/.bashrc # For Bash users
   ```

## Building and Running with `wcc`

1. Use `wcc` to compile your program:
   ```bash
   wcc -o main main.c
   ```

   The `wcc` tool automatically includes the MyLibc headers and links the shared libraries specified in the `SO_PATHS` environment variable.

2. Run your program:
   ```bash
   ./main
   ```

## Contributions

Contributions are welcome! Feel free to submit issues or pull requests if you have suggestions or improvements.

## License

This project is licensed under the MIT License. For more details, see the [LICENSE](LICENSE) file.
